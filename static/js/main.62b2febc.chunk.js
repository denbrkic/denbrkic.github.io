(this.webpackJsonpsafe=this.webpackJsonpsafe||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(38)},,,,,function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),o=n.n(c),i=(n(22),n(23),function(e){return a.a.createElement("div",{className:e.componentName},e.children)}),s=n(2),u=n(3),l=n(16),p=n(1),d={states:[{id:1,indicator:"Unlocked",status:"Ready"},{id:2,indicator:"Unlocked",status:"Locking..."},{id:3,indicator:"Locked",status:""},{id:4,indicator:"Locked",status:"Unlocking..."},{id:5,indicator:"Locked",status:"Error"},{id:6,indicator:"Locked",status:"Service"},{id:7,indicator:"Locked",status:"Validating..."}],currentStateId:1,currentIndicator:"",currentPassword:"",enteredMasterCode:"",serialNumber:4815162342,currentScreenContents:"",keyInputDisabled:!1,isMatch:!1,isMasterCodeMatch:!1,isDeviceOn:!1},m=Object(u.c)({safe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SCREEN_CONTENTS":var n=["Ready","Service"],r=n.includes(e.currentScreenContents)?"":e.currentScreenContents;return Object(p.a)(Object(p.a)({},e),{},{currentScreenContents:r+t.payload});case"TOGGLE_KEY_INPUT":return Object(p.a)(Object(p.a)({},e),{},{keyInputDisabled:!e.keyInputDisabled});case"SET_NEW_PASSWORD":return Object(p.a)(Object(p.a)({},e),{},{currentPassword:e.currentScreenContents});case"DISPLAY_STATE":var a=e.states.find((function(e){return e.id===t.payload}));return Object(p.a)(Object(p.a)({},e),{},{currentScreenContents:a.status,currentIndicator:a.indicator});case"CHANGE_STATE":return Object(p.a)(Object(p.a)({},e),{},{currentStateId:t.payload});case"VERIFY_PASSWORD":var c=e.currentScreenContents===e.currentPassword;return Object(p.a)(Object(p.a)({},e),{},{isMatch:c});case"VERIFY_MASTER_PASSWORD":var o=e.serialNumber===t.payload;return Object(p.a)(Object(p.a)({},e),{},{isMasterCodeMatch:o});case"DEVICE_ON":return Object(p.a)(Object(p.a)({},e),{},{isDeviceOn:t.payload});default:return e}}}),f=[l.a],S=Object(u.d)(m,{},u.a.apply(void 0,f)),b=n(4),E=n(5),C=n(7),h=n(6),y=(n(30),function(e){return a.a.createElement(i,{componentName:"SerialNumber"},a.a.createElement("span",{className:"SerialNumber--text"},"S/N: ",e.sn))}),O=(n(31),function(e){return a.a.createElement(i,{componentName:"Status"},a.a.createElement("span",null,e.text))}),v=(n(32),function(e){return a.a.createElement(i,{componentName:"Indicator"},a.a.createElement("span",null,e.text))}),k=(n(33),function(e){Object(C.a)(n,e);var t=Object(h.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return a.a.createElement(i,{componentName:"Screen"},a.a.createElement("div",{id:"screen-switch",className:"Screen--switch ".concat(this.props.isDeviceOn?"Screen--switch-on":"Screen--switch-off")},a.a.createElement(v,{text:this.props.currentIndicator}),a.a.createElement(O,{text:this.props.currentScreenContents})))}}]),n}(r.Component)),T=Object(s.b)((function(e){return{currentScreenContents:e.safe.currentScreenContents,currentIndicator:e.safe.currentIndicator,isDeviceOn:e.safe.isDeviceOn}}),(function(){return{}}))(k),g=(n(34),n(8)),N=n.n(g),I=n(10),j=(n(36),function(e){return a.a.createElement(i,{componentName:"Key"},a.a.createElement("div",{className:"Key--digit",onClick:function(){e.cb(e.digit)}},e.digit))}),D=(n(37),function(e){Object(C.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).endInputTimeout=null,e.deviceTimeout=null,e.updateState=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n&&e.props.onToggleKeyInput(),e.props.onChangeState(t),e.props.onDisplayState(t)},e.onKeyClickCallback=function(t){null!==e.deviceTimeout&&clearTimeout(e.deviceTimeout),e.props.isDeviceOn||e.props.onDeviceOn(!0),!1===e.props.keyInputDisabled&&(1===e.props.currentStateId&&e.props.currentScreenContents.length<6&&!isNaN(t)&&e.props.onUpdateScreenContents(t),1===e.props.currentStateId&&6===e.props.currentScreenContents.length&&"L"===t&&(e.props.onSetNewPassword(),e.updateState(2),setTimeout((function(){e.updateState(3)}),3e3)),3===e.props.currentStateId&&e.props.currentScreenContents.length<5&&!isNaN(t)&&e.props.onUpdateScreenContents(t),3===e.props.currentStateId&&5===e.props.currentScreenContents.length&&(e.props.onUpdateScreenContents(t),e.props.onToggleKeyInput(),setTimeout((function(){e.props.onVerifyPassword(),e.props.isMatch?(e.updateState(4,!1),setTimeout((function(){e.updateState(1)}),3e3)):"000000"===e.props.currentScreenContents?setTimeout((function(){e.updateState(6)}),1200):(e.updateState(5,!1),setTimeout((function(){e.updateState(3)}),1200))}),1200)),6===e.props.currentStateId&&e.props.currentScreenContents.length<=13&&(null!==e.endInputTimeout&&clearTimeout(e.endInputTimeout),e.props.onUpdateScreenContents(t),e.endInputTimeout=setTimeout(Object(I.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onVerifyMasterPassword(e.props.currentScreenContents);case 2:e.updateState(7),setTimeout((function(){e.props.isMasterCodeMatch?(e.updateState(4,!1),setTimeout((function(){e.updateState(1)}),3e3)):(e.updateState(5,!1),setTimeout((function(){e.updateState(3)}),1200))}),1200);case 4:case"end":return t.stop()}}),t)}))),1200))),e.deviceTimeout=setTimeout((function(){e.props.onDeviceOn(!1)}),15e3)},e}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.onDisplayState(this.props.currentStateId)}},{key:"render",value:function(){return a.a.createElement(i,{componentName:"Keypad"},a.a.createElement("div",null,a.a.createElement(j,{digit:"7",cb:this.onKeyClickCallback}),a.a.createElement(j,{digit:"8",cb:this.onKeyClickCallback}),a.a.createElement(j,{digit:"9",cb:this.onKeyClickCallback})),a.a.createElement("div",null,a.a.createElement(j,{digit:"4",cb:this.onKeyClickCallback}),a.a.createElement(j,{digit:"5",cb:this.onKeyClickCallback}),a.a.createElement(j,{digit:"6",cb:this.onKeyClickCallback})),a.a.createElement("div",null,a.a.createElement(j,{digit:"1",cb:this.onKeyClickCallback}),a.a.createElement(j,{digit:"2",cb:this.onKeyClickCallback}),a.a.createElement(j,{digit:"3",cb:this.onKeyClickCallback})),a.a.createElement("div",null,a.a.createElement(j,{digit:"*",cb:this.onKeyClickCallback}),a.a.createElement(j,{digit:"0",cb:this.onKeyClickCallback}),a.a.createElement(j,{digit:"L",cb:this.onKeyClickCallback})))}}]),n}(r.Component)),w=Object(s.b)((function(e){return{currentStateId:e.safe.currentStateId,currentScreenContents:e.safe.currentScreenContents,keyInputDisabled:e.safe.keyInputDisabled,isMatch:e.safe.isMatch,isMasterCodeMatch:e.safe.isMasterCodeMatch,isDeviceOn:e.safe.isDeviceOn}}),(function(e){return{onUpdateScreenContents:function(t){return e(function(e){return function(t){t({type:"UPDATE_SCREEN_CONTENTS",payload:e})}}(t))},onToggleKeyInput:function(){return e((function(e){e({type:"TOGGLE_KEY_INPUT"})}))},onSetNewPassword:function(){return e((function(e){e({type:"SET_NEW_PASSWORD"})}))},onDisplayState:function(t){return e(function(e){return function(t){t({type:"DISPLAY_STATE",payload:e})}}(t))},onChangeState:function(t){return e(function(e){return function(t){t({type:"CHANGE_STATE",payload:e})}}(t))},onVerifyPassword:function(t){return e((function(e){e({type:"VERIFY_PASSWORD"})}))},onVerifyMasterPassword:function(t){return e(function(e){return function(){var t=Object(I.a)(N.a.mark((function t(n){var r,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://9w4qucosgf.execute-api.eu-central-1.amazonaws.com/default/CR-JS_team_M02a?code=".concat(e));case 3:return r=t.sent,t.next=6,r.json();case 6:a=t.sent,n({type:"VERIFY_MASTER_PASSWORD",payload:a.sn}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error("There is a server problem. Please try again later.",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))},onDeviceOn:function(t){return e(function(e){return function(t){t({type:"DEVICE_ON",payload:e})}}(t))}}}))(D),_=function(e){Object(C.a)(n,e);var t=Object(h.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return a.a.createElement(i,{componentName:"Panel"},a.a.createElement(T,null),a.a.createElement(w,null),a.a.createElement(y,{sn:this.props.serialNumber}))}}]),n}(r.Component),M=Object(s.b)((function(e){return{serialNumber:e.safe.serialNumber}}),(function(){return{}}))(_),P=function(){return a.a.createElement(s.a,{store:S},a.a.createElement(i,{componentName:"App"},a.a.createElement(M,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.62b2febc.chunk.js.map